{% extends 'main/layout.html' %}
{% load static %}

{% block title %}{{ room.name }}{% endblock %}

{% block content %}
    <!-- Breadcrumb Section Begin -->
    <div class="breadcrumb-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb-text">
                        <h2>Our Rooms</h2>
                        <div class="bt-option">
                            <a href="./home.html">Home</a>
                            <span>Rooms</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb Section End -->

    <!-- Room Details Section Begin -->
    <section class="room-details-section spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="room-details-item">
                        {% if room.image %}
                            <div style="text-align: center;">
                                <img src="{{ room.image.url }}" alt="{{ room.name }}" style="width: 100%; height: 50%;">
                            </div>
                        {% else %}
                            <div style="text-align: center;">
                                <img src="{% static 'path/to/default/image.jpg' %}" alt="No image available" style="width: 60%; height: auto;">
                            </div>
                        {% endif %}
                        <div class="rd-text">
                            <div class="rd-title">
                                <h3>{{ room.name }}</h3>
                                <div class="rdt-right">
                                    <div class="rating">
                                        <i class="icon_star"></i>
                                        <i class="icon_star"></i>
                                        <i class="icon_star"></i>
                                        <i class="icon_star"></i>
                                        <i class="icon_star-half_alt"></i>
                                    </div>
                                    <a href="{% url 'rooms:book_room' room.id %}">Бронирование сейчас</a>
                                </div>
                            </div>
                            <h2>{{ room.price }}тг<span>/за сутки</span></h2>
                            <table>
                                <tbody>
                                    <tr>
                                        <td class="r-o">Площадь:</td>
                                        <td>{{ room.room_area }} кв.м</td>
                                    </tr>
                                    <tr>
                                        <td class="r-o">Кол-во человек:</td>
                                        <td>{{ room.number_of_people }}</td>
                                    </tr>
                                    <tr>
                                        <td class="r-o">Номер:</td>
                                        <td>{{ room.room_number }}</td>
                                    </tr>
                                    <tr>
                                        <td class="r-o">Статус:</td>
                                        <td>{{ room.room_status }}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p class="f-para">Комната отличается уютной атмосферой и современным дизайном, идеально подходящая как для отдыха, так и для деловых поездок.</p>
                            <p>Светлые тона интерьера, мягкое освещение и качественные материалы создают приятную обстановку, в которой приятно расслабиться после долгого дня.</p>
                        </div>
                    </div>

                    <!-- Comments Section -->
                    <div class="rd-reviews">
                        <h4>Коментарий</h4>
                        {% for comment in room.comments.all %}
                            <div class="review-item">
                                <div class="ri-text">
                                    <span>{{ comment.created_at|date:"d M Y" }}</span>
                                    <h5>{{ comment.user.username }}</h5>
                                    <p>{{ comment.text }}</p>
                                </div>
                            </div>
                        {% empty %}
                            <p>Комментарии отсутствуют.</p>
                        {% endfor %}
                    </div>

                    <!-- Add Review Section -->
                    {% if user.is_authenticated %}
                        <div class="review-add">
                            <h4>Написать коментарии</h4>
                            <form action="{% url 'rooms:add_comment' room.id %}" method="post" class="ra-form">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-lg-6">
                                        <input type="text" name="login" value="{{ user.username }}" readonly placeholder="Login">
                                    </div>
                                    <div class="col-lg-6">
                                        <input type="email" name="email" value="{{ user.email }}" readonly placeholder="Email">
                                    </div>
                                    <div class="col-lg-12">
                                        <textarea name="text" placeholder="Твой комментарий"></textarea>
                                        <button type="submit">Отправить</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    {% else %}
                        <p>Пожалуста, <a href="{% url 'login' %}">Войдите</a> чтобы оставить коментарий.</p>

                    {% endif %}
                </div>
            </div>
        </div>
    </section>
    <!-- Room Details Section End -->
{% endblock %}
